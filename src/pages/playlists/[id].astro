---
import { playlistBy, artists, songsBy, amountOfSongs, duration } from "@/domain/playlists";
import Layout from "@/layouts/Layout.astro";

const { id } = Astro.params;

const playlist = playlistBy(id!);
---

{
  playlist && (
    <Layout>
      <div
        id="playlist-container"
        class="relative flex flex-col h-full bg-zinc-900 overflow-x-hidden gap-8"
        transition:name={`playlist-${id}-card`}
      >
        <header class="flex gap-3 p-3">
          <picture class="flex-none aspect-square w-52 h-52">
            <img
              src={playlist.cover}
              alt={`Cover of ${playlist.title}`}
              class="rounded-md object-cover w-full h-full"
              transition:name={`playlist-${playlist.id}-image`}
            />
          </picture>
          <div class="flex flex-col justify-between">
            <h2 class="flex flex-1 items-end">PLAYLIST</h2>
            <h1 class="text-5xl font-bold text-white">
              <span transition:name={`playlist-${playlist.id}-title`}>
                {playlist?.title}
              </span>
            </h1>

            <div class="flex flex-1 items-end">
              <p class="text-gray-300">{artists(playlist)}</p>
            </div>
            <div class="flex flex-1 items-end">
              <p class="text-gray-300">{amountOfSongs(playlist)} songs, {duration(playlist)}</p>
            </div>
          </div>
        </header>
        <div class="relative z-10 px-6 py-10" />
        <div class="absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/80"></div>
      </div>
    </Layout>
  )
}
